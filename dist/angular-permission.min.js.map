{"version":3,"sources":["angular-permission.js"],"names":["permission","angular","module","config","$stateProvider","decorator","state","parentFn","self","$$state","run","$rootScope","$state","$q","$location","Authorization","PermissionMap","$on","event","toState","toParams","fromState","fromParams","options","areSetStatePermissions","isDefined","data","permissions","setStateAuthorizationStatus","status","extend","$$isAuthorizationFinished","isAuthorizationFinished","areStateEventsDefaultPrevented","isStateChangePermissionStartDefaultPrevented","isStateChangeStartDefaultPrevented","compensatePermissionMap","permissionMap","toStatePath","get","name","path","slice","reverse","forEach","extendPermissionMap","authorizeForState","authorize","then","handleAuthorizedState","rejectedPermission","handleUnauthorizedState","$broadcast","replace","go","notify","resolveRedirectState","redirect","params","defaultPrevented","preventDefault","compensatedPermissionMap","$delegate","only","promises","deferred","defer","counter","results","isArray","promise","key","when","value","hasOwnProperty","resolve","reason","reject","factory","this","resolvePermissionMapProperty","except","redirectTo","resolveFunctionRedirect","redirectFunction","call","redirectState","isString","isObject","TypeError","resolveObjectRedirect","redirectObject","ReferenceError","isFunction","property","prototype","length","concat","rejectedPermissionName","Permission","permissionName","validationFunction","validateConstructor","wrapInPromise","result","dfd","validatePermission","validationResult","PermissionStore","Role","roleName","permissionNames","defineManyPermissions","validateRole","map","hasPermissionDefinition","getPermissionDefinition","all","service","definePermission","permissionStore","removePermissionDefinition","getStore","clearStore","defineRole","roleStore","removeRoleDefinition","hasRoleDefinition","getRoleDefinition","permissionDirective","$log","PermissionStrategies","restrict","scope","bindToController","onAuthorized","onUnauthorized","deprecatedOnly","deprecatedExcept","controllerAs","controller","$scope","$element","onAuthorizedAccess","showElement","onUnauthorizedAccess","hideElement","warn","$watchGroup","e","error","message","$inject","directive","RoleStore","permissionsMap","$$toParams","isCompensatedMap","authorizeCompensatedMap","authorizeFlatPrivilegedMap","resolveCompensatedExceptPrivilegeMap","exceptPromises","resolveCompensatedPrivilegeMap","rejectedPermissions","resolveCompensatedOnlyPrivilegeMap","onlyPromises","resolvedPermissions","resolveFlatExceptPrivilegeMap","resolvePrivilegeMap","resolveFlatOnlyPrivilegeMap","privilegesNames","statePrivileges","resolvedStatePrivileges","privilegeName","role","constant","enableElement","removeAttr","disableElement","attr","removeClass","addClass"],"mappings":"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","file":"angular-permission.min.js"}