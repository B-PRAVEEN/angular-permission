/**
 * angular-permission-ui
 * Extension module of angular-permission for access control within ui-router
 * @version v3.0.0-beta - 2016-04-20
 * @link https://github.com/Narzerus/angular-permission
 * @author Rafael Vidaurre <narzerus@gmail.com> (http://www.rafaelvidaurre.com), Blazej Krysiak <blazej.krysiak@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */


!function(){"use strict";function a(a){a.decorator("parent",function(a,b){return a.self.$$state=function(){return a},b(a)})}function b(a,b,c,d,e,f,g){a.$on("$stateChangeStart",function(a,h,i,j,k,l){function m(){d.toState=h,d.toParams=i,d.fromState=j,d.fromParams=k,d.options=l}function n(a){angular.extend(h,{$$isAuthorizationFinished:a})}function o(){return h.$$isAuthorizationFinished}function p(){e.broadcastPermissionAcceptedEvent(),b.replace(),d.options=angular.extend({},d.options,{notify:!1}),c.go(d.toState.name,d.toParams,d.options).then(function(){e.broadcastStateChangeSuccessEvent()})}function q(a,b){e.broadcastPermissionDeniedEvent(),b.resolveRedirectState(a).then(function(a){c.go(a.state,a.params,a.options)})}if(!o()&&(n(!0),m(),!e.areEventsDefaultPrevented())){e.broadcastPermissionStartEvent(),a.preventDefault();var r=new g(d.toState);f.authorize(r).then(function(){p()})["catch"](function(a){q(a,r)})["finally"](function(){n(!1)})}})}angular.module("permission.ui",["permission","ui.router"]).config(a).run(b)}(),function(){"use strict";function a(a,b,c,d){function e(){return j()||k()}function f(){b.$broadcast(d.permissionStart,c.toState,c.toParams,c.options)}function g(){b.$broadcast(d.permissionAccepted,c.toState,c.toParams,c.options)}function h(){b.$broadcast(d.permissionDenies,c.toState,c.toParams,c.options)}function i(){b.$broadcast("$stateChangeSuccess",c.toState,c.toParams,c.fromState,c.fromParams)}function j(){return b.$broadcast(d.permissionStart,c.toState,c.toParams,c.options).defaultPrevented}function k(){return b.$broadcast("$stateChangeStart",c.toState,c.toParams,c.fromState,c.fromParams,c.options).defaultPrevented}return a.areEventsDefaultPrevented=e,a.broadcastStateChangeSuccessEvent=i,a.broadcastPermissionStartEvent=f,a.broadcastPermissionAcceptedEvent=g,a.broadcastPermissionDeniedEvent=h,a}angular.module("permission.ui").decorator("TransitionEvents",a)}(),function(){"use strict";var a={permissionStart:"$stateChangePermissionStart",permissionAccepted:"$stateChangePermissionAccepted",permissionDenies:"$stateChangePermissionDenied"};angular.module("permission.ui").value("TransitionEventNames",a)}(),function(){"use strict";function a(a){function b(a){return c(a)}function c(b){var c=a.defer();return d(c,b),c.promise}function d(b,c){var d=f(c.except,c);a.all(d).then(function(a){b.reject(a)})["catch"](function(){e(b,c)})}function e(b,c){if(!c.only.length)return void b.resolve();var d=f(c.only,c);a.all(d).then(function(a){b.resolve(a)})["catch"](function(a){b.reject(a)})}function f(b,c){return b.length?b.map(function(b){var d=c.resolvePropertyValidity(b);return a.any(d)}):[a.reject()]}this.authorize=b}angular.module("permission").service("StateAuthorization",a)}(),function(){"use strict";function a(a){function b(b){var d=b.$$state(),e=d.path.slice().reverse();angular.forEach(e,function(b){if(c(b)){var d=new a(b.data.permissions);this.extendPermissionMap(d)}},this)}function c(a){return angular.isDefined(a.data)&&angular.isDefined(a.data.permissions)}return b.prototype=new a,b.prototype.extendPermissionMap=function(a){a.only.length&&(this.only=this.only.concat([a.only])),a.except.length&&(this.except=this.except.concat([a.except])),this.redirectTo=a.redirectTo},b}angular.module("permission.ui").factory("StatePermissionMap",a)}();
//# sourceMappingURL=angular-permission-ui.min.js.map